webpackJsonp([5],{"5K2V":function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAUCAYAAAAUccS4AAAFeklEQVRIib1X229URRz+Zs5l9+wWtpRaQlstbQJEjQ9cvEuCPhHfNEqib8ZEE8OfojG++obRBI2QYEz1xQvgAzF4AaU1QGmhFLbbK+1euuecmTG/35yzexbYPhEmmZ7Lzpn55vt93+83Fci08fFxNDY2sL2vDxf+/OONX86du+io+PrGehWu60FKyV0IASGFvWY7TZVek2ZaN4bvDV3Tru1VGw2jNbTWCMMISim8efQodu/ZgyNHjrTmkh1gfxjH0uICwjBEtVZ7/crEZE+zXofjOHiUjTZAm/c8r2NVN/tw6uS3GH1iCGd+vo6Tp79bXSyXPxobHDwuXMcYY2TKiGWq/R1N/BAbzVxwpDOplLrdFeyOHTsQBMGTN2b+emdtdfXdZw8eGPQ9/0OKq+TQWxlk76kprSAgIfjRAr8XPrNFOHTmJY3X9F6APraSitHf349r01MXfzp35hiA3x4ItlqrvbWtt++Lx3YOBr3b+9BbKrGOaBKHwDmJZhlwql9az7S1m+i2U7QUEf7boVetFX9r7zW/dzckerb0oFKp7J2amnqqK1it9UAUx0EzDHminO/TxiGlYGBOFux9XTCfFmcnr1Y6psNcWpGxlL0m5jJG8xqkVSnlSj7I17rKwHXcxvWpa9F8pez1beuD73kwQliwjpOAdRio57loNpuo1dYhhESpVEKhULAsp+wm+k4NEyuFleVlRFEI38+hp2cL4ihioIoAKwva933UI5sVuoJt1OsoV+Z5DVrc8VxexAJNu+RnSjWDQ0MYGhpmYJX5eayvrSHvu4kG2zIgxmKl4RrguedfYOaWlpYwd2sWuXyeQVGnaNJY+l2HIVS8CdiFpWXcul3GRrMJpTRyuRzvVLoO3BZYl7Vbq1Xx0suHcPjV1/jbs2d/xY/j36NU2MpAhWkDJtbW19cwOjqG997/gN9VKvP47NNPEIWhDbsjoWIJ5Wm4nstRIfBdwVK4yOn5IEC1Vk3cbs1FjDqyzWw+n+dvKLQw1tFBEHCngsHfGpspKLxRs4lCsYhGo8GbJtaKxSLW4pjnQ2wAx7S8wKZTujtYCjmFQ3oehEm0JtN4CptqhGiZndxNG0hzrzUipTW7KUtrQoKUHK1UVlktA+0Mkq5GVU1tBjafy/HgarWKWrVm0xK5FNKmME1AdWuB23NzuHr1Ci96547N381maGWQjGHn8xzA4uICJi5fxtbeEm7OzLBHaFyaDbROs0XyvBnYkZERjI3uwqXJSU5PcaR4hxQ2my6NrfHGsHYv/3MJ/01OsExol+ziWj0TDWswnaQuKuWnTn7D8200GgyUftFxzAbkrEBGiwmo2lyzfdt6MTQ0iCvT01hfryKitGJsWnF4pxJSaUipOMy0GI0hnbueZ917b2HoOMBoxFGMhlKJAU2SCVImFcIogp+kLVq7K1jHdQu7d+/1ZmbnMDN9A2HYZDKFVOxWJy0ErXwrWoYgo6VVrLMomESD4HRn+IRlNdkOf8qk4UNU6Pm8AaO16Ao2CIJbBpiVkI9TmGmXpBuRAhRp1bIm4moGs3m5TdnNMpzo0x4NTaso0DgqNL7n07U/DKOgK9hczj89N3fz7MKdubfXVpaPLSwuPdNTKK4R6UIKkT3PtktsxtUMNnV3ltjs2SBlODWSSc4HlmGqaLVqzRkYGDizvVy+cGN6+sFg795dpR2tjIyOff73vxP7zp///fjhQ698CSF9UOFNwi5Ewm7CZutAnjkXZKpta0P3HcATdjlbaNPKCI163d85PDxbKpWaXZndv/8gCoWtePHQ0zCuN/L1iRMfK63nHecB/xVk+sNuNCdJMI7jjpk7wO7bdwBxHKGQz6GnWPxqeNdIbCiBk54e8X8L9zUA/wPX6WtJV2W2vgAAAABJRU5ErkJggg=="},"6WBz":function(t,n){},DR5j:function(t,n){},EQ0w:function(t,n){t.exports="data:image/png;base64,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"},Zrlr:function(t,n,a){"use strict";n.__esModule=!0,n.default=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}},fZk0:function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAUCAYAAAAUccS4AAAF80lEQVRIib1WXW9URRh+3plzds8uu/2kUFoRixAjYiJCQC68MCaEaEw0wRi98dJouDImXPgXvPHWCw1GQ4hXRvxIRBMpypeGAIlFKi1QirTY7cdue/acMx9mZs45u5Uul5x2dmbbzJxnnvd5n/cltD0nvv0OtZUEA+t7MXbxwmvHR89deltNTry6MoZ5vwIwBkoHGLk1McCcQmZtZvvRdqq2v+ZDa7NOZ6WhlQKUgtZuVlKB4iYgBG4e+hD17fvwxsEX85NYO9izJ79B3/IUwljgWkO8FP/5R+W58BZCXsDDfMxlGBF831/1Vq/9y48nvsIHewLMnPkNR45dXtg1c/29oc2VozVeNnQwpMy44Q4lmIMdc7TmhXQ+a7vuPJvBHM9lYnxMSnmnI9jqwCB0UHmyMnXyzb1LV996d9/g0LJP7xDjLvTcSMCsKZeDAiGU2knEoqXVKsjxtiSgVQZaQZMCDDwo+wMm0TvQj6uTk5dOnLp8GMDpNcHOLTUP1fyhzy/07S4t9C9ia6+HSDNw7jlwBiznOVAztNGqhr2AQUsp2IxPSsOa69YA1crqVUuV61Yp6eYmB+/uxZ3Ze09MXL+9oyNYJeUGncSliYgsC+VSERE8eNwDLEgO5mUsu5kzhhJnLrHIMd5CmRLbLh8DTmsLzoK1gM1aAlJB+RxeUIQf+/OlIFjuKIOeIoX+3StJbW7W7+3tgxcQOArQngfGuQVoZjJM+z4oCSHCunUGv6sXKHW5kBK1wu+otThJCoiFexBJBO4V4VW6IWIBKAEYsELCCIsHRejY/EmiI9havYmr03OINKGrpwe6EIJT0YI1AJnPQZZZDwwSYmAbsHErJDHw2i0UwznAL6S6zQA7nRqgiSLIkd2A50PMz4BmrsEvB1BCQklhwRrdskLRBUE8AOy1fxZx+noNtWWgGDXhBQGY4lB+Acywa4Cms27WwXa/jJ79r1jy5s9/D3nmKErVLhf9VWAVUJ9HOLQTXYeOIACweG8G4WfvI5DLSHgREByaCTAlQAUfykjlQcyaEPoMCEoBVNxMk8mEPk0sj6egPSAowxwVxhqknRvwSgV+pQxl9qTaNS/UQkKrJmhdF6JGDOlxSCHBK1VQI4QRG8ucwnNSM2ClVJ3BGiMWUoJMoqQ+uroiMVupsignmqxeoQhCkwXoLud07XwTkFrbREyUgjBOyjhi4zJwlQ86tbs2y9OZQ3QCWywW7cbGcgN6eRmEkiuLpEA6y1qCJg5mXjxzAysT1+z/CvdugkuFJAzTC1HLWw1DEqDaNOp/X4RX7YOeHkNXuGRLiT1XqVVDpeW3I9hntw/jwM5NmDw7BWGpS5x2tDNxyj3Ss0lSHh8FnzhnZVFiCqpYgKjXXb+wSl3OrtY1poCfPoYiDzxqwGMaibFXIWw/YJJMJwLKk9YJ5IOY3bC+B48/MojuYBaztQXoOILUKmVGgrhh1ujYHOiZgoYqhbZYKF5AFCd5M2OkpDOjVa1isE7G0MKQQBCKoIWwzNrMN+sohuYRlOQpSR3AhlQsx0PP+BuH65gcn0AUmg0SintW+LaCMQ/kOW1KziDSBAQJCzAvDmnpzauXubTWEDItr2mYs4LgCDFgmxDMh5IFExHqCLZSLt0OPDW1zQs3nyOOKDK3Tuxm1l5qOctdIgEhsnUgA8nW6A3aWkPd1hr+bxif1UkTVSogbhbWx3FS6gi2u+R/3b04fupg7fzrP9SmDl++u/HpbVW+JBFxyRgxxtNmpjUUka2gWejR3szoNrBtZVfrrCfQbbNjl5KmOYtvGtj6S2//yu+1G+Nrg0X9XzSix+avDO//ZLTk75r+9a+jx17o/yKmoKAIJFmridFtzbfPne90BItWp5VXNOVAm6yHbDHMZQJqLBU2bKxM9XR3Rx2ZHdm5Dz+vDGNuzwE8L0a2nD/+6Ue3FGb6uURIXq7HjMUs9Do3ySz+93e2xkrzxiYfrb3Z2rScpsAkSQxhXKLtWeUxw0/txWJxEI+WCSNV/8tkyw4xig0o6+S+lz/0B8B/ke2KrVNBWnkAAAAASUVORK5CYII="},iF8W:function(t,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=a("Xxa5"),i=a.n(e),s=a("mvHQ"),o=a.n(s),r=a("exGp"),c=a.n(r),l=a("Zrlr"),h=a.n(l),d=a("wxAW"),p=a.n(d),u=a("ptRb"),g=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;h()(this,t),this.index=n,this.name=a,this.dom=e,this.positionData=i,this.rotation=s,this.state=o,this.dispaly=r,this.infoWindowDom=c}return p()(t,[{key:"next",value:function(){if(this.index++,this.index>=this.positionData.length)this.state=!0;else{var t=this.positionData[this.index-1],n=t.carLat,a={lng:t.carLong,lat:n},e=this.positionData[this.index],i=e.carLat,s=e.carLong,o={lng:s,lat:i},r=new BMap.Point(s,i);this.dom.setPosition(r),this.rotation=this.getRotation(a,o),this.dom.setRotation(this.rotation),this.infoWindowDom.setContent(this.getMessageWindow())}}},{key:"getRotation",value:function(t,n){var a=n.lng-t.lng,e=n.lat-t.lat,i=a/e,s=Math.atan(i);return s=s/Math.PI*180,s-=e>=0?90:270}},{key:"getMessageWindow",value:function(){this.index;return 0,'<p style="line-height: 20px"><span style="font-weight: bold;">车牌号：</span>'+this.positionData[0].carno+'</p><p style="line-height: 20px"><span style="font-weight: bold;">速度：</span>'+this.positionData[0].speed+'</p><p style="line-height: 20px"><span style="font-weight: bold;">经度：</span>'+this.positionData[0].carLong+'</p><p style="line-height: 20px"><span style="font-weight: bold;">纬度：</span>'+this.positionData[0].carLat+'</p><p style="line-height: 20px"><span style="font-weight: bold;">方向：</span>'+this.positionData[0].direction+'</p><p style="line-height: 20px"><span style="font-weight: bold;">高度：</span>'+this.positionData[0].height+'</p><p style="line-height: 20px"><span style="font-weight: bold;">轨迹ID：</span>'+this.positionData[0].terminalId+'</p><p style="line-height: 20px"><span style="font-weight: bold;">上传时间：</span>'+this.positionData[0].uptime+"</p>"}}]),t}(),m={data:function(){return{terminalId2carno:{},map:null,showingCompany:"",companiesAndCars:[],selectedCars:[],checkedList:[],carInstances:{},followingView:{isTrue:!1,carName:"鲁H73B77",key:0},timer:null,addcar_timer:null,loading:!0,rawData:[]}},created:function(){this.initData()},mounted:function(){this.initBaiDuMap()},beforeRouteLeave:function(t,n,a){clearInterval(this.timer),a()},methods:{initBaiDuMap:function(){this.map=new BMap.Map("bm-view"),this.map.centerAndZoom(new BMap.Point(116.521832,35.402216),10),this.map.addControl(new BMap.MapTypeControl({anchor:BMAP_ANCHOR_TOP_RIGHT,mapTypes:[BMAP_NORMAL_MAP,BMAP_SATELLITE_MAP,BMAP_HYBRID_MAP]}));var t=new BMap.ScaleControl({anchor:BMAP_ANCHOR_TOP_LEFT});this.map.addControl(t);var n=new BMap.NavigationControl;this.map.addControl(n);var a=new BMap.Size(10,20);function e(){this.defaultAnchor=BMAP_ANCHOR_BOTTOM_RIGHT,this.defaultOffset=new BMap.Size(10,60)}this.map.addControl(new BMap.CityListControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,offset:a})),e.prototype=new BMap.Control,e.prototype.initialize=function(t){var n=document.getElementById("CustomControl"),a=document.getElementById("switch");n.appendChild(a);var e=document.getElementById("change");return n.appendChild(a),n.appendChild(e),n.style.boxShadow="2px 4px 6px 2px rgba(27, 142, 236, 0.7)",n.style.borderRadius="2px",n.style.background="transparent",t.getContainer().appendChild(n),n};var i=new e;this.map.addControl(i),this.map.setCurrentCity("北京"),this.map.enableScrollWheelZoom(!0),this.map.enableInertialDragging(),this.map.enableContinuousZoom()},debounce:function(t,n){var a=void 0;return function(){var e=this,i=arguments;a&&clearInterval(a),a=setInterval(function(){t.apply(e,i)},n)}},initData:function(){var t=c()(i.a.mark(function t(){var n=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Object(u.G)(!1).then(function(t){for(var a=JSON.parse(o()(t.data.respBody)),e=0;e<70;++e)a[e].carCompanyName&&function(){var t=a[e],i=t.carCompanyID,s=t.carCompanyName;Object(u.Q)(s,!1).then(function(t){var a=JSON.parse(o()(t.data.respBody));n.companiesAndCars.push({companyId:i,companyName:s,cars:a})})}();Object(u._5)().then(function(t){for(var a=JSON.parse(o()(t.data.respBody)),e=0;e<a.length;e++)n.terminalId2carno[a[e].terminalId]=a[e].carNo}).then(function(){Object(u.Z)().then(function(t){for(var a=JSON.parse(o()(t.data.respBody)),e=0;e<a.length;e++)if(a[e].acc>0)if(a[e].carno)n.selectedCars.push(a[e].carno),n.checkedList.push(a[e].carno);else{var i=n.terminalId2carno[a[e].terminalId];""!=i&&(n.selectedCars.push(i),n.checkedList.push(i))}}).then(function(){n.run(),n.loading=!1})})}).catch(function(t){console.log("initData方法出错：",t.message)});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),changeFollowingCar:function(){var t=[];for(var n in this.carInstances)this.carInstances[n].dispaly&&t.push(this.carInstances[n].name);var a=this.followingView.key%t.length;this.followingView.carName=t[a],this.followingView.key++},addCar:function(){var t=c()(i.a.mark(function t(n){var a,e,s,r,c,l,h,d,p,u,m,f,w,A,v,I,M,x,B,C,y;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this,n in this.carInstances){for(a.carInstances[n].dom.show(),a.carInstances[n].dom.dispaly=!0,e=[],s=0;s<a.rawData.length;s++)a.rawData[s].carno==n&&a.rawData[s].acc>0&&e.push(a.rawData[s]);-1!=o()(e).indexOf("carLat")&&(a.carInstances[n].positionData=e,r=a.carInstances[n].positionData[0],c=r.carLat,l=r.carLong,h=r.direction,d=new BMap.Point(l,c),a.carInstances[n].dom.setPosition(d),a.carInstances[n].dom.setRotation(h),a.carInstances[n].dom.setTitle(n)),p={width:250,height:160,offset:{width:8,height:-8}},-1!=o()(a.carInstances[n].positionData).indexOf("carLat")&&((u=new BMap.InfoWindow(a.carInstances[n].getMessageWindow(),p)).disableAutoPan(),a.carInstances[n].infoWindowDom=u,a.carInstances[n].dom.addEventListener("click",function(){a.carInstances[n].dom.openInfoWindow(u)}))}else{for(m=new BMap.Icon("../../../static/img/bus_purple_s.png",new BMap.Size(52,26),{anchor:new BMap.Size(21.5,10)}),f=new BMap.Point(0,0),a.carInstances[n]=new g(0,n,new BMap.Marker(f,{icon:m}),[],0,!1,!0),a.map.addOverlay(a.carInstances[n].dom),w=[],A=0;A<a.rawData.length;A++)a.rawData[A].carno==n&&a.rawData[A].acc>0&&w.push(a.rawData[A]);-1!=o()(w).indexOf("carLat")&&(a.carInstances[n].positionData=w,v=a.carInstances[n].positionData[0],I=v.carLat,M=v.carLong,x=v.direction,B=new BMap.Point(M,I),a.carInstances[n].dom.setPosition(B),a.carInstances[n].dom.setRotation(x),a.carInstances[n].dom.setTitle(n)),C={width:250,height:160,offset:{width:8,height:-8}},-1!=o()(a.carInstances[n].positionData).indexOf("carLat")&&((y=new BMap.InfoWindow(a.carInstances[n].getMessageWindow(),C)).disableAutoPan(),a.carInstances[n].infoWindowDom=y,a.carInstances[n].dom.addEventListener("click",function(){a.carInstances[n].dom.openInfoWindow(y)}))}case 2:case"end":return t.stop()}},t,this)}));return function(n){return t.apply(this,arguments)}}(),removeCar:function(t){t in this.carInstances&&(this.carInstances[t].dom.hide(),this.carInstances[t].dom.dispaly=!1),t===this.followingView.carName&&this.changeFollowingCar(this)},run2:function(){this.debounce(this.run,1e4)},run:function(){var t=c()(i.a.mark(function t(){var n,a=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this,this.addcar_timer=setInterval(function(){Object(u.Z)().then(function(t){for(var e=JSON.parse(o()(t.data.respBody)),i=[],s=0;s<e.length;s++)e[s].carno||(e[s].carno=n.terminalId2carno[e[s].terminalId]);i=JSON.parse(o()(e).replace(/lat/g,"carLat").replace(/lon/g,"carLong"));for(var r=0;r<i.length;++r){var c=i[r],l=c.carLong,h=c.carLat,d=a.wgs2bd(h,l),p=d.lat,u=d.lng;i[r].carLong=u,i[r].carLat=p,i[r].uptime=a.$moment(i[r].uptime).format("YYYY-MM-DD HH:mm:ss")}a.rawData=JSON.parse(o()(i)),a.selectedCars.map(function(t){a.addCar(t)})}).then(function(){})},1e3),n.timer=setInterval(function(){for(var t in n.carInstances){if(n.followingView.isTrue&&n.followingView.carName===t&&n.carInstances[t].dispaly){var a=n.carInstances[t].index,e=n.carInstances[t].positionData[a],i=e.carLat,s=e.carLong,o=new BMap.Point(s,i);n.map.setCenter(o)}n.carInstances[t].next()}},5e3);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),changeCheckstate:function(t){if(t.length!==this.selectedCars.length){if(t.length>this.selectedCars.length){var n=this.compare(t,this.selectedCars)[0];this.addCar(n),this.$message({message:"成功！车辆 “"+n+"” 加入渲染队列",type:"success",duration:2e3})}else{var a=this.compare(this.selectedCars,t)[0];this.removeCar(a),this.$message({message:"成功！车辆 “"+a+"” 退出渲染队列",type:"warning",duration:2e3})}this.selectedCars=t}},compare:function(t,n){return t.filter(function(t){return-1===n.indexOf(t)})},transformLat:function(t,n){var a=3.141592653589793,e=2*t-100+3*n+.2*n*n+.1*t*n+.2*Math.sqrt(Math.abs(t));return e+=2*(20*Math.sin(6*t*a)+20*Math.sin(2*t*a))/3,e+=2*(20*Math.sin(n*a)+40*Math.sin(n/3*a))/3,e+=2*(160*Math.sin(n/12*a)+320*Math.sin(n*a/30))/3},transformLon:function(t,n){var a=3.141592653589793,e=300+t+2*n+.1*t*t+.1*t*n+.1*Math.sqrt(Math.abs(t));return e+=2*(20*Math.sin(6*t*a)+20*Math.sin(2*t*a))/3,e+=2*(20*Math.sin(t*a)+40*Math.sin(t/3*a))/3,e+=2*(150*Math.sin(t/12*a)+300*Math.sin(t/30*a))/3},delta:function(t,n){var a=3.141592653589793,e=6378245,i=.006693421622965943,s=this.transformLat(n-105,t-35),o=this.transformLon(n-105,t-35),r=t/180*a,c=Math.sin(r);c=1-i*c*c;var l=Math.sqrt(c);return{lat:s=180*s/(e*(1-i)/(c*l)*a),lng:o=180*o/(e/l*Math.cos(r)*a)}},wgs2gcj:function(t,n){var a=this.delta(t,n);return{lat:t+a.lat,lng:n+a.lng}},gcj2bd:function(t,n){var a=52.35987755982988,e=n,i=t,s=Math.sqrt(e*e+i*i)+2e-5*Math.sin(i*a),o=Math.atan2(i,e)+3e-6*Math.cos(e*a),r=s*Math.cos(o)+.0065;return{lat:s*Math.sin(o)+.006,lng:r}},wgs2bd:function(t,n){var a=this.gcj2bd(t,n),e=this.wgs2gcj(a.lat,a.lng);return{lat:e.lat,lng:e.lng}}}},f={render:function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{attrs:{id:"realTimeTrack"}},[t._m(0),t._v(" "),a("div",{attrs:{id:"controlBar"}},[t._m(1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{id:"selectCar","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("p",[t._v("选择车辆")]),t._v(" "),a("div",{attrs:{id:"companyAndCar"}},[a("el-checkbox-group",{on:{change:t.changeCheckstate},model:{value:t.checkedList,callback:function(n){t.checkedList=n},expression:"checkedList"}},t._l(t.companiesAndCars,function(n){return a("el-collapse",{key:n.companyId,attrs:{accordion:""},model:{value:t.showingCompany,callback:function(n){t.showingCompany=n},expression:"showingCompany"}},[a("el-collapse-item",{attrs:{name:n.companyName}},[a("template",{slot:"title"},[t._v("\n                "+t._s(n.companyName)+"\n              ")]),t._v(" "),t._l(n.cars,function(t){return a("div",{key:t.carId},[a("div",{staticClass:"singleCar"},[a("el-checkbox",{attrs:{label:t.carNo}})],1)])})],2)],1)}),1)],1)])]),t._v(" "),a("div",{staticStyle:{padding:"7px"},attrs:{id:"CustomControl"}}),t._v(" "),a("div",{staticStyle:{"line-height":"30px"},attrs:{id:"switch"}},[a("span",[t._v("跟随视角：")]),t._v(" "),a("el-switch",{model:{value:t.followingView.isTrue,callback:function(n){t.$set(t.followingView,"isTrue",n)},expression:"followingView.isTrue"}})],1),t._v(" "),a("div",{attrs:{id:"change"}},[a("span",[t._v("切换跟随车辆：")]),t._v(" "),a("el-button",{attrs:{round:"",size:"mini",icon:"el-icon-refresh"},on:{click:t.changeFollowingCar}})],1)])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"map"}},[n("div",{attrs:{id:"bm-view"}})])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"example"}},[e("p",[t._v("车辆状态")]),t._v(" "),e("section",[e("div",[e("img",{attrs:{src:a("EQ0w"),alt:"Online Car"}}),e("span",[t._v("在线")])]),t._v(" "),e("div",[e("img",{attrs:{src:a("5K2V"),alt:"Offline Car"}}),e("span",[t._v("离线")])])]),t._v(" "),e("section",[e("div",[e("img",{attrs:{src:a("fZk0"),alt:"Overspeed Car"}}),e("span",[t._v("超速")])]),t._v(" "),e("div",[e("img",{attrs:{src:a("pj1k"),alt:"Stop Car"}}),e("span",[t._v("停车")])])])])}]};var w=a("VU/8")(m,f,!1,function(t){a("DR5j"),a("6WBz")},"data-v-d58d1354",null);n.default=w.exports},pj1k:function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAUCAYAAAAUccS4AAAFaElEQVRIicVXS49URRg9X91HP2emGZgBwQkPiUYiRgxbDErckBCDERNcuSMxRKPRP+DalUs3ilFREhcmGCLBACoBA/IIz4nMABlkMjDM9Lzovn2r6jNVdW/37WZ6WBkrqf7q3k5XnTp1vvNVEzLt8OGjmJoRGBgo4frVU7sPHTl/ae8LF0d3rruGagyQSDq1IiiN1Hx+rLF7w+w+XARYu3c2Jh0KYAXcH/oUj3q34e03Xm1OJ7IT/3nqS/QXjqIeKdwcFzvr42fLWwdHUVeLAPgPm9mAIEIQBG2L+NmHY8cO4uN3gbGrx/HJj7q6uffv91aVcKDaAIMhLBsJSylbhkghsgx33wR3RnLvbEw6CAxCkYR3XSl1ryvY3ooAvPLzxejs3i0r/Hf27fJWP4LaRz7giU4ZkAWpGajHGaBPlAG5ozdjKwNuk4GRwLJKETdGbl06cv7GfgB/LAr2wVTw1uTsrq/PTMwU5sOLWL/6HzSMhpggvAxY4dg00bAhVLKBFCi1MHP6wUnI6tV2aulVAypm+KUQ49cmnhsdebipK1ilMKiVKtyezAFooFhiyAgIKAHntUA2QXtAyXOgmwkHtKHlNmaTpFKA7mDURB0DQY7hB/50IV9c6CqDSjmqBfL7eKr6UrCsMoAwfx8eO0BNsM1OdnYVOykEeYB8l69NhtFi1NGqEddgf+P55jdkxwao0gApt0k/hKVZ6fbMbgM7Pe1heEShIQV6+3rARqs55xkpUKtfjyCIIYN1oOJWx5g6h5DuWC1bcBnA5ntiRtwIwKUd8KgMXbsNEZ2zgA0mkViWNqcVGAI0lNTdwQ6PFvD72RBT1TmEqoAgBDxzRCmbvtOu52l7hP6q99H3zIcW1/TI59DVD1Ask5Fes1F67DGjHmxD5dkjKOSB6uQ9LFzehFI4g1gKQAIsnF68wHixhl4KLEEi8D3kCwWoBcdm2i1QH66bZwZiBmpzDpBBHBSAoJgUiMTBdcKYOSWhKohqTpdKKvj5EILcXE4uZDVlJKa1IWQJGRAJSMk2mhWYu/um0WWsPKczBqT2m9rmJPHSpti9lxFDSpeMDRVa425OT23BMqv0EszmcjkQSSzMz0KmecgdGUuOAfIYcv4CajRsfTys/wUKYBPIgG0taship8noGuYfnISfWwO1cAI9esZqtGVjLc+1zKolwL78IvD6tjncOtQPTTmXpXFSlJOabjzXeKMhrhB/BbHwg024fPgIygjJFghu89m0GJT0MPDwNWgug3gWvgfEkbBS0YodGWZNAZtcWsvuYAcH89i4vozeYoiJGQWOAdlwYK1WzWQeQ3tmMoLvMUpezQJjaSoZWQ22VbJEj5oJxIQCaTDPWruL66IJUqeXGOk0rDVbdruCrctKMfZ3ByufeoDRmyfQMMnQSI5eOluhZiVjKEH22fOchtkwSp3iS+XAiaRcxbIbUJljT4qCIcgkrFLa2Bd1BVsuB3fz+erYhuWTQ2eoiFqNwJJt1oskaaijgpl1Y5m9yPCiYJGpXlpnKlk2H9g5RU8vIao3VjSiRqEr2EpP/FNf/rvfdgxhz8/K3395hDZvXMWzUrIHAXJgXT1N7wcGQ6wSbJnEQmcVW/J+0EouMuNa5K1eOXiyfznOTY13AYv4FuYXMH1lbvsXZ8Ynt4wfvHLgwEf4pqYQaukcTRhBJbcu+2zKY3oR5w6n48yQ20sv65Y0dMpyesGOauHAsp6xSl896srs2g178OuFlZjyd2H7zuNrT/8y89lY9f5EfzlCTWZuVtQ+Zjy5PXaXXWTsbM6ZeBw3II0pZ1rbP4U1697ETO0VDK1oYO0gvlV9m+Tpu0+jmDH4/60B+BdC6AHqXIVlwgAAAABJRU5ErkJggg=="},wxAW:function(t,n,a){"use strict";n.__esModule=!0;var e,i=a("C4MV"),s=(e=i)&&e.__esModule?e:{default:e};n.default=function(){function t(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),(0,s.default)(t,e.key,e)}}return function(n,a,e){return a&&t(n.prototype,a),e&&t(n,e),n}}()}});
//# sourceMappingURL=5.c77154944173bfcd155a.js.map
webpackJsonp([19],{"9mmy":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("HzJ8"),i=a.n(r),n=a("lC5x"),o=a.n(n),l=a("J0Oq"),s=a.n(l),d=a("3cXf"),c=a.n(d),u=a("ptRb"),m={data:function(){return{headerStyle:{border:"0.093vh solid #067EA5",fontSize:"1.296vh",fontFamily:"Microsoft YaHei",fontWeight:"bold",color:"#FFFFFF",lineHeight:"3.333vh",textAlign:"center"},cellStyle:{background:"rgb(34, 74, 138,0.1)",border:"0.093vh solid #067EA5",fontSize:"1.296vh",fontFamily:"Microsoft YaHei",fontWeight:"bold",color:"#FFFFFF",lineHeight:"3.333vh",textAlign:"center",height:"5.741vh"},rolen:window.sessionStorage.usern,username:window.sessionStorage.namen,tableData:[],subTableData:[],multipleSelection:[],currentPage:1,totalCount:0,pageSizes:[5,10,20],PageSize:5,organizationName:"",currentId:0,nextTodoId:3,addDialog:!1,addForm:{address:"",mobile:"",organizationName:"",parentAccount:"",remark:"",socialCreditCode:""},addFormRules:{address:[{required:!0,message:"不能为空!",trigger:"blur"}],mobile:[{required:!0,message:"不能为空！",trigger:"blur"},{type:"number",message:"必须为数字值！",trigger:"blur"}],organizationName:[{required:!0,message:"不能为空!",trigger:"blur"}],parentAccount:[{required:!0,message:"不能为空!",trigger:"blur"}],socialCreditCode:[{required:!0,message:"不能为空!",trigger:"blur"}]},updateDialog:!1,updateForm:{address:"",mobile:"",organizationName:"",parentAccount:"",remark:"",socialCreditCode:""},updateFormRules:{address:[{required:!0,message:"不能为空!",trigger:"blur"}],mobile:[{required:!0,message:"不能为空！",trigger:"blur"},{type:"number",message:"必须为数字值！",trigger:"blur"}],organizationName:[{required:!0,message:"不能为空!",trigger:"blur"}],parentAccount:[{required:!0,message:"不能为空!",trigger:"blur"}],socialCreditCode:[{required:!0,message:"不能为空!",trigger:"blur"}]}}},created:function(){this.getData()},watch:{organizationName:function(){this.tableData=JSON.parse(c()(this.subTableData));for(var e=this.organizationName,t=[],a=0;a<this.tableData.length;a++)-1!=this.tableData[a].organizationName.indexOf(e)&&t.push(this.tableData[a]);this.tableData=JSON.parse(c()(t)),this.totalCount=this.tableData.length,this.currentPage=1}},methods:{toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){var t=this;this.PageSize=e,this.currentPage=1;var a={page:this.currentPage,size:this.PageSize};findAll(a).then(function(e){t.allData=JSON.parse(c()(e.data)),t.tableData=JSON.parse(c()(t.allData)),t.subTableData=JSON.parse(c()(t.tableData))})},handleCurrentChange:function(e){var t=this;this.currentPage=e;var a={page:this.currentPage,size:this.PageSize};findAll(a).then(function(e){t.allData=JSON.parse(c()(e.data)),t.tableData=JSON.parse(c()(t.allData)),t.subTableData=JSON.parse(c()(t.tableData))})},getData:function(){var e=this;return s()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.L)().then(function(t){e.tableData=JSON.parse(c()(t.data.respBody.records)),e.subTableData=JSON.parse(c()(e.tableData)),e.totalCount=e.tableData.length,console.log(e.tableData)});case 2:case"end":return t.stop()}},t,e)}))()},cancelAddData:function(){this.addDialog=!1,this.addForm={address:"",mobile:"",organizationName:"",parentAccount:"",remark:"",socialCreditCode:""}},addData:function(){var e=this,t={address:this.addForm.address,mobile:this.addForm.mobile,id:this.nextTodoId++,organizationName:this.addForm.organizationName,parentAccount:this.addForm.parentAccount,remark:this.addForm.remark,socialCreditCode:this.addForm.socialCreditCode,status:1,updateTime:new Date,createTime:new Date,updateUser:this.username,createUser:this.username};Object(u.a)(t).then(function(){e.$message({message:"添加成功！",type:"success",offset:300,center:!0,duration:1e3})}).then(function(){e.getData().then(function(){e.cancelAddData()})})},openUpdateDialog:function(e){this.currentId=e;var t=this.tableData.findIndex(function(t){if(t.id==e)return!0});this.updateForm=this.tableData[t],this.updateDialog=!0},cancelUpdateData:function(){this.updateDialog=!1,this.updateForm={address:"",mobile:"",organizationName:"",parentAccount:"",remark:"",socialCreditCode:""}},updateData:function(){var e=this,t={id:this.currentId,address:this.updateForm.address,mobile:this.updateForm.mobile,organizationName:this.updateForm.organizationName,parentAccount:this.updateForm.parentAccount,remark:this.updateForm.remark,socialCreditCode:this.updateForm.socialCreditCode,createTime:new Date,createUser:this.username,updateTime:new Date,updateUser:this.username};Object(u.W)(t).then(function(){e.getData().then(function(){e.cancelUpdateData()})})},deleteOneData:function(e){var t=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){Object(u.k)(e).then(function(){t.$message({message:"删除成功！",type:"success",offset:300,center:!0,duration:1e3})}).then(function(){t.getData()})})},deleteData:function(){var e=this,t=[],a=!0,r=!1,n=void 0;try{for(var o,l=i()(this.multipleSelection);!(a=(o=l.next()).done);a=!0){var s=o.value;t.push(s.id)}}catch(e){r=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw n}}console.log(t),this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){Object(u.h)(t).then(function(){e.$message({message:"删除成功！",type:"success",offset:300,center:!0,duration:1e3}),e.multipleSelection=[],e.getData()})})}}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{attrs:{id:"title"}},[r("div",{staticClass:"crumb"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[e._v("系统管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("组织管理")])],1)],1),e._v(" "),r("img",{attrs:{src:a("PY/F"),alt:"箭头"}})]),e._v(" "),r("div",{attrs:{id:"select"}},[r("span",[e._v("组织名称：")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.organizationName,expression:"organizationName"}],staticClass:"input-style",attrs:{type:"text",placeholder:"请输入名称"},domProps:{value:e.organizationName},on:{input:function(t){t.target.composing||(e.organizationName=t.target.value)}}}),e._v(" "),r("button",{staticClass:"add-btu ml",on:{click:function(t){e.addDialog=!0}}},[e._v("新增")]),e._v(" "),r("button",{staticClass:"delete-btu ml",on:{click:e.deleteData}},[e._v("删除")])]),e._v(" "),r("div",{attrs:{id:"mytable"}},[r("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData.slice((e.currentPage-1)*e.PageSize,e.currentPage*e.PageSize),border:"","header-cell-class-name":"table-header","header-cell-style":e.headerStyle,"cell-style":e.cellStyle,"max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"organizationName",align:"center",label:"组织名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"parentAccount",align:"center",label:"上级单位"}}),e._v(" "),r("el-table-column",{attrs:{prop:"socialCreditCode",align:"center",label:"组织编码"}}),e._v(" "),r("el-table-column",{attrs:{prop:"mobile",align:"center",label:"联系电话"}}),e._v(" "),r("el-table-column",{attrs:{prop:"address",align:"center",label:"地址"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createUser",align:"center",label:"创建人"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间"}}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",align:"center",label:"备注"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.openUpdateDialog(t.row.id)}}},[e._v("更改")]),e._v(" "),r("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.deleteOneData(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.PageSize,total:e.totalCount},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),e._v(" "),r("el-dialog",{attrs:{visible:e.addDialog,"append-to-body":"",width:"60%",title:"请填写信息","label-width":"80px"},on:{"update:visible":function(t){e.addDialog=t}}},[r("el-form",{ref:"addFormRef",attrs:{rules:e.addFormRules,model:e.addForm,inline:!0}},[r("el-form-item",{attrs:{label:"组织名称",prop:"organizationName"}},[r("el-input",{model:{value:e.addForm.organizationName,callback:function(t){e.$set(e.addForm,"organizationName",e._n(t))},expression:"addForm.organizationName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"上级单位",prop:"parentAccount"}},[r("el-input",{model:{value:e.addForm.parentAccount,callback:function(t){e.$set(e.addForm,"parentAccount",t)},expression:"addForm.parentAccount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"组织编码",prop:"socialCreditCode"}},[r("el-input",{model:{value:e.addForm.socialCreditCode,callback:function(t){e.$set(e.addForm,"socialCreditCode",t)},expression:"addForm.socialCreditCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"联系电话",prop:"mobile"}},[r("el-input",{model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",e._n(t))},expression:"addForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地址",prop:"address"}},[r("el-input",{model:{value:e.addForm.address,callback:function(t){e.$set(e.addForm,"address",t)},expression:"addForm.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.addData}},[e._v("确认提交")]),e._v(" "),r("el-button",{on:{click:e.cancelAddData}},[e._v("重置")])],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{visible:e.updateDialog,"append-to-body":"",width:"60%",title:"请修改信息","label-width":"80px"},on:{"update:visible":function(t){e.updateDialog=t}}},[r("el-form",{ref:"updateFormRef",attrs:{rules:e.updateFormRules,model:e.updateForm,inline:!0}},[r("el-form-item",{attrs:{label:"组织名称"}},[r("el-input",{model:{value:e.updateForm.organizationName,callback:function(t){e.$set(e.updateForm,"organizationName",e._n(t))},expression:"updateForm.organizationName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"上级单位"}},[r("el-input",{model:{value:e.updateForm.parentAccount,callback:function(t){e.$set(e.updateForm,"parentAccount",t)},expression:"updateForm.parentAccount"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"组织编码"}},[r("el-input",{model:{value:e.updateForm.socialCreditCode,callback:function(t){e.$set(e.updateForm,"socialCreditCode",t)},expression:"updateForm.socialCreditCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"联系电话"}},[r("el-input",{model:{value:e.updateForm.mobile,callback:function(t){e.$set(e.updateForm,"mobile",e._n(t))},expression:"updateForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地址"}},[r("el-input",{model:{value:e.updateForm.address,callback:function(t){e.$set(e.updateForm,"address",t)},expression:"updateForm.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{model:{value:e.updateForm.remark,callback:function(t){e.$set(e.updateForm,"remark",t)},expression:"updateForm.remark"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v("确认修改")]),e._v(" "),r("el-button",{on:{click:e.cancelUpdateData}},[e._v("取消修改")])],1)],1)],1)],1)},staticRenderFns:[]};var g=a("C7Lr")(m,p,!1,function(e){a("zDRT"),a("wwJO")},"data-v-25955d26",null);t.default=g.exports},wwJO:function(e,t){},zDRT:function(e,t){}});
//# sourceMappingURL=19.7db1f95c62ada6e891c6.js.map
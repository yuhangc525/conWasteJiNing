webpackJsonp([21],{MyHG:function(t,e){},"jL/Y":function(t,e){},tp4q:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("3cXf"),r=a.n(n),o=a("ptRb"),i=(a("nUgu"),{data:function(){return{headerStyle:{border:"0.093vh solid #067EA5",fontSize:"1.296vh",fontFamily:"Microsoft YaHei",fontWeight:"bold",color:"#FFFFFF",lineHeight:"3.333vh",textAlign:"center"},cellStyle:{background:"rgb(34, 74, 138,0.1)",border:"0.093vh solid #067EA5",fontSize:"1.296vh",fontFamily:"Microsoft YaHei",fontWeight:"bold",color:"#FFFFFF",lineHeight:"3.333vh",textAlign:"center",height:"5.741vh"},rolen:window.sessionStorage.usern,username:window.sessionStorage.namen,allData:[],tableData:[],subTableData:[],currentPage:1,totalCount:0,pageSizes:[5,10,20],PageSize:5,select_companyId:"",select_company:"",select_linkman:"",carInfoDialog:!1,carInfoForm:{carCompanyID:"",carCompanyName:"",contact:"",contactNumber:"",inputName:"",inputTime:"",reviewStatus:""},carInfoDialog2:!1,carInfoForm2:{carCompanyID:"",carCompanyName:"",contact:"",contactNumber:"",inputName:"",inputTime:"",reviewStatus:""},carInfoFormRules2:{carCompanyName:[{required:!0,message:"不能为空!",trigger:"blur"}],contact:[{required:!0,message:"不能为空!",trigger:"blur"}],contactNumber:[{required:!0,message:"不能为空!",trigger:"blur"}]},carInfoFormRules:{carCompanyName:[{required:!0,message:"不能为空!",trigger:"blur"}],contact:[{required:!0,message:"不能为空!",trigger:"blur"}],contactNumber:[{required:!0,message:"不能为空!",trigger:"blur"}]},carInfoDialog3:!1,reviewDialog:!1,reviewStatusRadio:0,currentCarId:0}},filters:{reviewStatusFormat:function(t){if(0===t){return"待审核"}if(1===t){return"审核通过"}if(2===t){return"审核未通过"}}},watch:{select_companyId:function(){console.log(this.select_carId),this.tableData=JSON.parse(r()(this.subTableData));for(var t=this.select_companyId,e=this.select_linkman,a=this.select_company,n=[],o=0;o<this.tableData.length;o++)-1!=this.tableData[o].carCompanyID.toString().indexOf(t)&&-1!=this.tableData[o].contact.toString().indexOf(e)&&-1!=this.tableData[o].carCompanyName.toString().indexOf(a)&&n.push(this.tableData[o]);this.tableData=JSON.parse(r()(n)),this.totalCount=this.tableData.length,this.currentPage=1},select_linkman:function(){this.tableData=JSON.parse(r()(this.subTableData));for(var t=this.select_companyId,e=this.select_linkman,a=this.select_company,n=[],o=0;o<this.tableData.length;o++)-1!=this.tableData[o].carCompanyID.toString().indexOf(t)&&-1!=this.tableData[o].contact.toString().indexOf(e)&&-1!=this.tableData[o].carCompanyName.toString().indexOf(a)&&n.push(this.tableData[o]);this.tableData=JSON.parse(r()(n)),this.totalCount=this.tableData.length,this.currentPage=1},select_company:function(){this.tableData=JSON.parse(r()(this.subTableData));for(var t=this.select_companyId,e=this.select_linkman,a=this.select_company,n=[],o=0;o<this.tableData.length;o++)-1!=this.tableData[o].carCompanyID.toString().indexOf(t)&&-1!=this.tableData[o].contact.toString().indexOf(e)&&-1!=this.tableData[o].carCompanyName.toString().indexOf(a)&&n.push(this.tableData[o]);this.tableData=n,this.totalCount=this.tableData.length,this.currentPage=1}},created:function(){this.getData()},methods:{getData:function(){var t=this;"admin"!==window.sessionStorage.usern&"superadmin"!==window.sessionStorage.usern?Object(o.E)(this.username,!1).then(function(e){t.allData=JSON.parse(r()(e.data.respBody)),t.tableData=JSON.parse(r()(t.allData)),t.totalCount=t.tableData.length,t.subTableData=JSON.parse(r()(t.tableData))}):Object(o.x)(!1).then(function(e){t.allData=JSON.parse(r()(e.data.respBody)),t.tableData=JSON.parse(r()(t.allData)),t.totalCount=t.tableData.length,t.subTableData=JSON.parse(r()(t.tableData))})},handleSizeChange:function(t){this.PageSize=t,this.currentPage=1},handleCurrentChange:function(t){this.currentPage=t},filterTag:function(t,e){return e.reviewStatus===t},resetCarInfoForm:function(){this.$refs.carInfoFormRef.resetFields()},resetCarInfoForm2:function(){this.$refs.carInfoFormRef2.resetFields()},addData:function(){var t=this,e={carCompanyName:this.carInfoForm.carCompanyName,contact:this.carInfoForm.contact,contactNumber:this.carInfoForm.contactNumber,inputName:window.sessionStorage.namen,inputTime:new Date,reviewStatus:0};Object(o.q)(e).then(function(){t.$message({message:"提交成功！",type:"success",offset:300,center:!0,duration:1e3}),t.carInfoDialog=!1,t.resetCarInfoForm()}).then(function(){t.getData()})},handleDelete:function(t){var e=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){var a=e.allData.findIndex(function(e){if(e.carCompanyID==t)return!0});window.sessionStorage.namen!==e.allData[a].inputName?e.$message({message:"对不起，您无权删除该数据！",type:"danger",offset:300,center:!0,duration:1e3}):Object(o.e)(e.allData[a].carCompanyID).then(function(){e.$message({message:"删除成功！",type:"success",offset:300,center:!0,duration:1e3})}).then(function(){e.getData()})}).catch(function(){})},getUpdateCarId:function(t){var e=this.allData.findIndex(function(e){if(e.carCompanyID==t)return!0});this.carInfoForm2=JSON.parse(r()(this.allData[e])),this.carInfoDialog2=!0},updateData:function(){var t=this,e={carCompanyID:this.carInfoForm2.carCompanyID,carCompanyName:this.carInfoForm2.carCompanyName,contact:this.carInfoForm2.contact,contactNumber:this.carInfoForm2.contactNumber,inputName:window.sessionStorage.namen,inputTime:new Date,reviewStatus:0};Object(o.S)(e).then(function(){t.$message({message:"修改成功！",type:"success",offset:300,center:!0,duration:1e3}),t.carInfoDialog2=!1,t.resetCarInfoForm2()}).then(function(){t.getData()})},getMessage:function(t){var e=this.allData.findIndex(function(e){if(e.carCompanyID==t)return!0});this.carInfoForm2=JSON.parse(r()(this.allData[e])),this.carInfoDialog3=!0},getReviewCarId:function(t){var e=this.allData.findIndex(function(e){if(e.carCompanyID==t)return!0});this.reviewDialog=!0,this.reviewStatusRadio=this.allData[e].reviewStatus,this.currentCarId=this.allData[e].carCompanyID},review:function(){var t=this,e={CAR_COMPANY_ID:this.currentCarId,REVIEW_STATUS:this.reviewStatusRadio};Object(o.T)(e).then(function(){t.$message({message:"修改成功！",type:"success",offset:300,center:!0,duration:1e3})}).then(function(){t.reviewDialog=!1,t.getData()})}}}),l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"title"}},[n("div",{staticClass:"crumb"},[n("el-breadcrumb",{attrs:{separator:"/"}},["admin"!==this.rolen&"superadmin"!==this.rolen?n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-lx-text"}),t._v(" 申报入口\n        ")]):t._e(),t._v(" "),"admin"===this.rolen|"superadmin"===this.rolen?n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-lx-text"}),t._v(" 申报管理\n        ")]):t._e(),t._v(" "),"admin"!==this.rolen&"superadmin"!==this.rolen?n("el-breadcrumb-item",[t._v("运输企业申报")]):t._e(),t._v(" "),"admin"===this.rolen|"superadmin"===this.rolen?n("el-breadcrumb-item",[t._v("运输企业管理")]):t._e()],1)],1),t._v(" "),n("img",{attrs:{src:a("PY/F"),alt:"箭头"}})]),t._v(" "),n("div",{attrs:{id:"select"}},["admin"!==t.rolen?n("button",{staticClass:"add-btu ml",on:{click:function(e){t.carInfoDialog=!0}}},[n("i",{staticClass:"el-icon-circle-plus"}),t._v(" 新增\n    ")]):t._e(),t._v(" "),n("span",[t._v("公司编号：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.select_companyId,expression:"select_companyId"}],staticClass:"input-style",attrs:{type:"text",placeholder:"请输入公司编号"},domProps:{value:t.select_companyId},on:{input:function(e){e.target.composing||(t.select_companyId=e.target.value)}}}),t._v(" "),n("span",[t._v("公司名称：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.select_company,expression:"select_company"}],staticClass:"input-style",attrs:{type:"text",placeholder:"请输入公司名称"},domProps:{value:t.select_company},on:{input:function(e){e.target.composing||(t.select_company=e.target.value)}}}),t._v(" "),n("span",[t._v("联系人：")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.select_linkman,expression:"select_linkman"}],staticClass:"input-style",attrs:{type:"text",placeholder:"请输入联系人"},domProps:{value:t.select_linkman},on:{input:function(e){e.target.composing||(t.select_linkman=e.target.value)}}})]),t._v(" "),n("div",{attrs:{id:"mytable"}},[n("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData.slice((t.currentPage-1)*t.PageSize,t.currentPage*t.PageSize),border:"","header-cell-class-name":"table-header","header-cell-style":t.headerStyle,"cell-style":t.cellStyle,"max-height":"600"}},[n("el-table-column",{attrs:{type:"index",label:"ID",align:"center",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"carCompanyID",label:"公司编号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"carCompanyName",label:"公司名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"contact",label:"联系人"}}),t._v(" "),n("el-table-column",{attrs:{prop:"contactNumber",label:"联系电话"}}),t._v(" "),n("el-table-column",{attrs:{prop:"reviewStatus",label:"审核状态",align:"center",filters:[{text:"待审核",value:0},{text:"审核通过",value:1},{text:"审核未通过",value:2}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:0===e.row.reviewStatus?"info":1===e.row.reviewStatus?"success":2===e.row.reviewStatus?"danger":""}},[t._v(t._s(t._f("reviewStatusFormat")(e.row.reviewStatus)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",icon:"el-icon-document"},on:{click:function(a){return t.getMessage(e.row.carCompanyID)}}},[t._v("详情")]),t._v(" "),"admin"!==t.rolen?n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.getUpdateCarId(e.row.carCompanyID)}}},[t._v("更改")]):t._e(),t._v(" "),"admin"===t.rolen?n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.getReviewCarId(e.row.carCompanyID)}}},[t._v("审核")]):t._e(),t._v(" "),n("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.row.carCompanyID)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.PageSize,total:t.totalCount},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.carInfoDialog,"append-to-body":"",width:"60%",title:"请填写申报信息","label-width":"80px"},on:{"update:visible":function(e){t.carInfoDialog=e}}},[n("el-form",{ref:"carInfoFormRef",attrs:{rules:t.carInfoFormRules,model:t.carInfoForm,inline:!0}},[n("el-form-item",{attrs:{label:"公司名称",prop:"carCompanyName"}},[n("el-input",{staticClass:"handle-input mr10",model:{value:t.carInfoForm.carCompanyName,callback:function(e){t.$set(t.carInfoForm,"carCompanyName",e)},expression:"carInfoForm.carCompanyName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"联系人",prop:"contact"}},[n("el-input",{staticClass:"handle-input mr10",model:{value:t.carInfoForm.contact,callback:function(e){t.$set(t.carInfoForm,"contact",e)},expression:"carInfoForm.contact"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"联系电话",prop:"contactNumber"}},[n("el-input",{staticClass:"handle-input mr10",model:{value:t.carInfoForm.contactNumber,callback:function(e){t.$set(t.carInfoForm,"contactNumber",e)},expression:"carInfoForm.contactNumber"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.addData}},[t._v("确认提交")]),t._v(" "),n("el-button",{on:{click:t.resetCarInfoForm}},[t._v("重置")])],1)],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.carInfoDialog2,"append-to-body":"",width:"60%",title:"请修改申报信息","label-width":"80px"},on:{"update:visible":function(e){t.carInfoDialog2=e}}},[n("el-form",{ref:"carInfoFormRef2",attrs:{rules:t.carInfoFormRules2,model:t.carInfoForm2,inline:!0}},[n("el-form-item",{attrs:{label:"公司名称",prop:"carCompanyName"}},[n("el-input",{staticClass:"handle-input mr10",model:{value:t.carInfoForm2.carCompanyName,callback:function(e){t.$set(t.carInfoForm2,"carCompanyName",e)},expression:"carInfoForm2.carCompanyName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"联系人",prop:"contact"}},[n("el-input",{staticClass:"handle-input mr10",model:{value:t.carInfoForm2.contact,callback:function(e){t.$set(t.carInfoForm2,"contact",e)},expression:"carInfoForm2.contact"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"联系电话",prop:"contactNumber"}},[n("el-input",{staticClass:"handle-input mr10",model:{value:t.carInfoForm2.contactNumber,callback:function(e){t.$set(t.carInfoForm2,"contactNumber",e)},expression:"carInfoForm2.contactNumber"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("确认修改")]),t._v(" "),n("el-button",{on:{click:t.resetCarInfoForm2}},[t._v("取消修改")])],1)],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.carInfoDialog3,"append-to-body":"",width:"60%",title:"申报信息详情","label-width":"80px"},on:{"update:visible":function(e){t.carInfoDialog3=e}}},[n("el-form",{attrs:{model:t.carInfoForm2,inline:!0}},[n("el-form-item",{attrs:{label:"公司编号"}},[t._v("\n        ：  \n        "),n("span",{staticStyle:{color:"red"}},[t._v(t._s(t.carInfoForm2.carCompanyID)+"        ")])]),t._v(" "),n("el-form-item",{attrs:{label:"公司名称"}},[t._v("\n        ：  \n        "),n("span",{staticStyle:{color:"red"}},[t._v(t._s(t.carInfoForm2.carCompanyName)+"        ")])]),t._v(" "),n("el-form-item",{attrs:{label:"联系人"}},[t._v("\n        ：  \n        "),n("span",{staticStyle:{color:"red"}},[t._v(t._s(t.carInfoForm2.contact)+"        ")])]),t._v(" "),n("el-form-item",{attrs:{label:"联系电话"}},[t._v("\n        ：  \n        "),n("span",{staticStyle:{color:"red"}},[t._v(t._s(t.carInfoForm2.contactNumber)+"        ")])]),t._v(" "),n("el-form-item",{attrs:{label:"录入人"}},[t._v("\n        ：  \n        "),n("span",{staticStyle:{color:"red"}},[t._v(t._s(t.carInfoForm2.inputName)+"        ")])]),t._v(" "),n("el-form-item",{attrs:{label:"录入时间"}},[t._v("\n        ：  \n        "),n("span",{staticStyle:{color:"red"}},[t._v(t._s(t._f("dateFormat1")(t.carInfoForm2.inputTime))+"        ")])]),t._v(" "),n("el-form-item",{attrs:{label:"审核状态"}},[t._v("\n        ：  \n        "),0===t.carInfoForm2.reviewStatus?n("span",{staticStyle:{color:"red"}},[t._v("待审核")]):t._e(),t._v(" "),1===t.carInfoForm2.reviewStatus?n("span",{staticStyle:{color:"red"}},[t._v("审核通过")]):t._e(),t._v(" "),2===t.carInfoForm2.reviewStatus?n("span",{staticStyle:{color:"red"}},[t._v("审核未通过")]):t._e()]),t._v("        \n    ")],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"请确定审核状态",visible:t.reviewDialog,"append-to-body":"",width:"40%"},on:{"update:visible":function(e){t.reviewDialog=e}}},[n("el-radio-group",{model:{value:t.reviewStatusRadio,callback:function(e){t.reviewStatusRadio=e},expression:"reviewStatusRadio"}},[n("el-radio",{attrs:{label:0}},[t._v("待定")]),t._v(" "),n("el-radio",{attrs:{label:1}},[t._v("准予通过")]),t._v(" "),n("el-radio",{attrs:{label:2}},[t._v("不准予通过")])],1),t._v(" "),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.review}},[t._v("确认")]),t._v(" "),n("el-button",{on:{click:function(e){t.reviewDialog=!1}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var s=a("C7Lr")(i,l,!1,function(t){a("jL/Y"),a("MyHG")},"data-v-0a4adcaf",null);e.default=s.exports}});
//# sourceMappingURL=21.dd3945b3a898c212bba3.js.map